# 次元城动漫在线搜索下载
****
## 前言
次元城动漫 https://www.cycdm01.top/ 目前网站已关闭，只能在客户端观看。  

这个网站的资源质量非常高，基本都是1080P无广告水印，然而在高峰期偶尔会卡顿，所以产生了逆向下载的想法。

之前也做过网页版的逆向，现在用Charles抓包工具分析客户端后，发现客户端分析更为简单，代码较少，直接演示结果:
****
## 使用演示

直接运行`main.py`即可

```
% python3 main.py 
搜索动漫：齐木楠雄
0-------齐木楠雄的灾难 再始动篇
1-------齐木楠雄的灾难 完结篇
2-------齐木楠雄的灾难 第二季
3-------齐木楠雄的灾难
选择影片：3
选择集数(更新至24集)：19
https://video.95189371.cn/6b2Q5pyo5qWg6ZuE55qE54G+6Zq+LTE5Lm1wNA==.mp3?verify=1687012926-I44vcp8Eh%2BOZ41iK5WFkTr1nz1a2FEpkasivhoa0aJM%3D
已成功发送至aria2
```
****
## 关于视频下载和依赖项
视频解析结果有两种，可能为m3u8文件，也可能为视频的直接地址

+ 对于m3u8文件，已写好`downloader.py`可以直接下载，但可能需要将文件内mac路径名方式`/`改成windows的`\\`

+ 对于视频的直接地址，推荐使用[`aria2`](https://aria2.github.io/)的方式进行下载，因为`aria2`支持多线程和断点续传，下载大文件比较快，可自行参考网上的配置教程

    + 在配置aria2时，需开启RPC，即在`aria2.conf`文件里设置`enable-rpc=true`，配置好aria2后，在后台开启RPC

    + 安装python库`aria2p`: `pip install aria2p`

    + 尽管`aria2`很快，但也有缺点，例如`RPC`模式不支持修改文件名，需借助第三方工具才能查看下载进度，例如：https://aria2c.com/

    + 如果下载好后文件名为`.mp3`后缀，直接改成`.mp4`即可，后缀名只是文件名不影响视频格式，如果视频格式不支持，可能需要功能强一点的视频播放工具

+ 除了`aria2`当然也可以用其他的方式进行下载，例如`IDM`，迅雷下载，浏览器下载等等，对于`aria2`配置失败的，将默认启动`python requests`库直接下载

